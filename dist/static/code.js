!function(t){var n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=0)}([function(t,n,r){"use strict";r.r(n);const e=[];function o(){return e}function i(t,n,r,e){const i={x1:parseInt(t),y1:parseInt(n),x2:parseInt(r),y2:parseInt(e)};o().push(i)}function s(t,n,r,e){const o=t,s=t+r;i(o,n+5,s,n+5),i(o,n+e-5,s,n+e-5),i(o+5,n,o+5,n+e),i(s-5,n,s-5,n+e)}function c(t,n,r,e,o,i,s){t.strokeStyle="#0000FF",i&&(t.strokeStyle=i),t.lineWidth=2,s&&(t.lineWidth=s),t.beginPath(),t.moveTo(n,r),t.lineTo(e,o),t.closePath(),t.stroke()}function a(t){o().forEach(n=>{c(t,n.x1,n.y1,n.x2,n.y2)})}function u(t,n,r,e){t.fillStyle=e,t.fillRect(n-5,r-5,10,10)}function l(){const t=[];o().forEach(n=>{t.push({x:n.x1,y:n.y1}),t.push({x:n.x2,y:n.y2})});const n=JSON.stringify(t);return JSON.parse(n)}function f(t,n,r,e){t===r&&(r+=.12345),n===e&&(e+=.12345);const o=(n-e)/(t-r);return{b:n-o*t,k:o}}function y(t,n,r){return t===r&&r++,t<n&&n<r||r<n&&n<t}function p(t,n,r,e){const i=l();i.push({x:t,y:n}),i.push({x:r,y:e});const s=[];i.forEach(t=>{i.forEach(n=>{let r=!1;o().forEach(e=>{!0===function(t,n,r,e,o,i,s,c){const a=f(t,n,r,e),u=f(o,i,s,c);let l=void 0;l=a.k-u.k!=0?(u.b-a.b)/(a.k-u.k):(u.b-a.b)/(a.k-u.k+.12345);const p=a.k*l+a.b,x=y(t,l,r),g=y(o,l,s),S=y(n,p,e),h=y(i,p,c);return!!(x&&g&&S&&h)}(t.x,t.y,n.x,n.y,e.x1,e.y1,e.x2,e.y2)&&(r=!0)}),t!==n&&!1===r&&s.push({x1:t.x,y1:t.y,x2:n.x,y2:n.y})})});const c=JSON.stringify(s);return JSON.parse(c)}function x(t,n,r,e){const o=r-t,i=e-n,s=o*o,c=i*i,a=Math.sqrt(s+c);return parseInt(a)}function g(t,n){let r=n;for(;r;){if(r.name.toString()===t.toString())return!0;r=r.parent}return!1}function S(t,n,r,e){const o=JSON.parse(JSON.stringify(t)),i=JSON.parse(JSON.stringify(n)),s=r.toString(),c=e.toString(),a={};for(let t in o)a[t]=99999999999999;const u={};for(let t in i){const n=t.toString().split("_")[0].toString(),r=t.toString().split("_")[1].toString(),e=x(o[n].xx,o[n].yy,o[r].xx,o[r].yy);u[n+"_"+r]=e,u[r+"_"+n]=e}return function(t,n,r,e){const o=JSON.parse(JSON.stringify(t)),i=JSON.parse(JSON.stringify(n)),s=r.toString(),c=e.toString(),a={name:s,parent:null,way:0};o[s]=0;let u=9999999999999,l=a;!function t(n){n.arr=[];for(let t in i){const r=t.split("_")[0].toString(),e=t.split("_")[1].toString();n.name===r&&!1===g(e,n)&&o[e]>n.way+i[t]&&(n.arr.push({name:e.toString(),parent:n,way:n.way+i[t]}),o[e]=n.way+i[t])}n.name.toString()!==c.toString()?parseInt(u)<=parseInt(n.way)||n.arr.forEach(n=>{t(n)}):u>n.way&&(u=n.way,l=n)}(a);const f=[];for(;l;)f.push(l.name),l=l.parent;return f.reverse(),f}(a,u,s,c)}function h(t){console.log("Call function eventsControl"),function(t){t.clearRect(0,0,800,600),t.fillStyle="#CCCCCC",t.fillRect(0,0,800,600)}(t),function(){console.log("Call function mapInitialize"),s(3,3,797,597),s(370,50,50,350),s(450,50,50,350),s(530,50,50,350),s(370,450,210,70);for(let t=0;t<3;t++)for(let n=0;n<5;n++)s(n%2==0?100*t+50-20:100*t+50+20,100*n+50,70,70)}(),a(t);const n=p(750,200,50,570);!function(t,n){n.forEach(n=>{c(t,n.x1,n.y1,n.x2,n.y2,"#00FF00",1)})}(t,n),a(t),u(t,750,200,"#FFFFFF"),u(t,50,570,"#FF0000");const r=l();r.push({x:750,y:200}),r.push({x:50,y:570});const e=S(function(t){const n={};return t.forEach(t=>{n[t.x+"^"+t.y]={xx:t.x,yy:t.y}}),n}(r),function(t){const n={};return t.forEach(t=>{const r=t.x1+"^"+t.y1,e=t.x2+"^"+t.y2;n[r+"_"+e]=!0}),n}(n),"750^200","50^570");for(let n=0;n<e.length;n++)if(n+1<e.length){const r=parseInt(e[n].split("^")[0]),o=parseInt(e[n].split("^")[1]),i=parseInt(e[n+1].split("^")[0]),s=parseInt(e[n+1].split("^")[1]);c(t,r,o,i,s,"#000000",2)}const o={x:750,y:200};let i=1;const f={x:parseInt(e[i].split("^")[0]),y:parseInt(e[i].split("^")[1])};setInterval((function(){!function(t,n,r){const e=parseInt(n.x),o=parseInt(n.y),i=parseInt(t.x),s=parseInt(t.y),c=e-i,a=o-s,u=Math.sqrt(c*c+a*a);let l=Math.abs(c/u),f=Math.abs(a/u);e<i&&(l*=-1),o<s&&(f*=-1),t.x+=r*l,t.y+=r*f}(o,f,2),u(t,o.x,o.y,"#000000"),x(o.x,o.y,f.x,f.y)<5&&i+1<e.length&&(i++,f.x=parseInt(e[i].split("^")[0]),f.y=parseInt(e[i].split("^")[1]))}),100)}window.onload=function(){console.log("Window load OK"),h(document.getElementById("can").getContext("2d"))}}]);